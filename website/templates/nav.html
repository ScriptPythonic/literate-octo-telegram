<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Exchange Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
    {% block style %}{% endblock style %}
    <style>
        /* Custom styles for the badge */
        .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #e53e3e; /* Tailwind CSS red-600 */
            color: white;
            border-radius: 9999px; /* Full rounded corners */
            padding: 0.25rem 0.5rem; /* Padding for the badge */
            font-size: 0.75rem; /* Text size for the badge */
            display: none; /* Hidden by default */
        }


        .show-badge .badge {
            display: block; /* Show the badge */
        }
        .flash-alert {
            position: fixed;
            top: 60px; /* Adjust based on the height of your navbar */
            left: 0;
            width: 100%;
            z-index: 50;
            display: none;
        }
        .form-input:focus {
            border-color: #cbd5e0;
            outline: none;
            box-shadow: 0 0 0 2px rgba(66, 153, 225, 0.5);
        }

        body.light-theme {
            background-color: #f4f4f4;
            color: #333;
        }
        .light-theme .bg-gray-900 {
            background-color: #fff !important;
        }
        .light-theme .text-white {
            color: #333 !important;
        }
        .light-theme .bg-gray-800 {
            background-color: #e2e2e2 !important;
        }
        .light-theme .text-gray-300 {
            color: #666 !important;
        }
        .light-theme .bg-blue-500 {
            background-color: #007bff !important;
        }
        .light-theme .hover\\:bg-blue-600:hover {
            background-color: #0056b3 !important;
        }
        .light-theme .bg-orange-500 {
            background-color: #ffa500 !important;
        }
        .light-theme .hover\\:bg-orange-600:hover {
            background-color: #cc8400 !important;
        }
        .light-theme .form-container {
            background-color: #edf2f7 !important;
        }
        .light-theme .form-input, .light-theme .form-select, .light-theme .form-file, .light-theme .btn {
            background-color: #edf2f7  !important;
            border: 1px solid #cbd5e0  !important;
            color: #2d3748  !important;
        }
    
        /* Style for the theme toggle button */
        #theme-toggle {
            position: fixed;
            bottom: 20px;
            left: -10px;
            background-color: #333;
            color: #fff;
            padding: 10px;
            border-radius: 50%;
            transform: translateY(50%);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
        #theme-toggle:hover {
            background-color: #555;
        }
        #theme-icon {
            width: 24px;
            height: 24px;
        }

    </style>
</head>
<body class="bg-gray-900 text-white">
    <!-- Navigation Bar -->
    <header class="bg-gray-800 text-white fixed w-full z-10 top-0">
        <div class="container mx-auto flex justify-between items-center px-4 py-4">
            <div class="text-2xl font-bold">StudentExchange</div>
            <nav class="hidden md:flex space-x-4 relative">
                <a href="/" class="hover:text-gray-300">Home</a>
                <a href="/my-listings" class="hover:text-gray-300">My Listings</a>
                <a href="/messages" class="hover:text-gray-300 relative">Messages
                    <span class="badge">1</span>
                </a>
                <a href="/profile" class="hover:text-gray-300">Profile</a>
                <a href="/logout" class="hover:text-gray-300">Logout</a>

            </nav>
            <div class="md:hidden">
                <button id="mobile-menu-toggle" class="text-white hover:text-gray-300 focus:outline-none">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
            </div>
        </div>
        <!-- Mobile Menu (hidden by default) -->
        <div id="mobile-menu" class="md:hidden bg-gray-800">
            <a href="/" class="block py-2 px-4 text-white hover:bg-gray-700">Home</a>
            <a href="/my-listings" class="block py-2 px-4 text-white hover:bg-gray-700">My Listings</a>
            <a href="/messages" class="block py-2 px-4 text-white hover:bg-gray-700 relative">Messages
                <span class="badge">1</span>
            </a>
            <a href="/profile" class="block py-2 px-4 text-white hover:bg-gray-700">Profile</a>
            <a href="/logout" class="block py-2 px-4 text-white hover:bg-gray-700">Logout</a>

        </div>
    </header>

    <!-- Flash Alert Bar -->
    <div class="flash-alert">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="bg-{{ 'red' if category == 'error' else 'green' }}-600 text-white text-center py-2 relative">
                        {{ message }}
                        <button class="absolute top-1/2 right-4 transform -translate-y-1/2 text-white hover:text-gray-300 focus:outline-none" onclick="this.parentElement.style.display='none';">
                            &times;
                        </button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>

    {% block content %}
    
    {% endblock content %}
    
    <button id="theme-toggle" class="bg-gray-800 text-white p-2 rounded">
        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="80" height="80" viewBox="0 0 80 80" id="theme-icon">
            <path d="M 40 7 C 27.308594 7 17 17.308594 17 30 C 17 37.285156 20.195313 41.851563 23.25 45.289063 C 24.78125 47.007813 26.269531 48.472656 27.328125 49.871094 C 28.386719 51.265625 29 52.535156 29 54 L 29 64 C 29 66.75 31.25 69 34 69 L 35.101563 69 C 35.570313 71.273438 37.59375 73 40 73 C 42.40625 73 44.429688 71.273438 44.898438 69 L 46 69 C 48.75 69 51 66.75 51 64 L 51 54 C 51 52.535156 51.613281 51.265625 52.671875 49.871094 C 53.730469 48.472656 55.21875 47.007813 56.75 45.289063 C 59.804688 41.851563 63 37.285156 63 30 C 63 17.308594 52.691406 7 40 7 Z M 40 9 C 51.609375 9 61 18.390625 61 30 C 61 36.714844 58.195313 40.648438 55.25 43.960938 C 53.78125 45.617188 52.269531 47.089844 51.078125 48.660156 C 49.886719 50.234375 49 51.964844 49 54 L 49 55 L 44 55 L 44 34.796875 C 45.707031 34.339844 47 32.84375 47 31 C 47 28.800781 45.199219 27 43 27 C 41.789063 27 40.734375 27.578125 40 28.4375 C 39.265625 27.578125 38.210938 27 37 27 C 34.800781 27 33 28.800781 33 31 C 33 32.84375 34.292969 34.339844 36 34.796875 L 36 55 L 31 55 L 31 54 C 31 51.964844 30.113281 50.234375 28.921875 48.660156 C 27.730469 47.089844 26.21875 45.617188 24.75 43.960938 C 21.804688 40.648438 19 36.714844 19 30 C 19 18.390625 28.390625 9 40 9 Z M 40 12 C 39.449219 12 39 12.449219 39 13 C 39 13.550781 39.449219 14 40 14 C 40.550781 14 41 13.550781 41 13 C 41 12.449219 40.550781 12 40 12 Z M 35.640625 12.578125 C 35.539063 12.578125 35.4375 12.585938 35.34375 12.613281 C 34.808594 12.757813 34.492188 13.304688 34.636719 13.839844 C 34.777344 14.371094 35.324219 14.6875 35.859375 14.546875 C 36.394531 14.402344 36.710938 13.855469 36.566406 13.320313 C 36.453125 12.898438 36.078125 12.597656 35.640625 12.578125 Z M 44.390625 12.578125 C 43.941406 12.582031 43.550781 12.886719 43.433594 13.320313 C 43.289063 13.855469 43.605469 14.402344 44.140625 14.546875 C 44.675781 14.6875 45.222656 14.371094 45.363281 13.839844 C 45.507813 13.304688 45.191406 12.757813 44.65625 12.613281 C 44.570313 12.589844 44.480469 12.578125 44.390625 12.578125 Z M 31.476563 14.277344 C 31.308594 14.28125 31.144531 14.328125 31 14.410156 C 30.523438 14.6875 30.355469 15.300781 30.632813 15.777344 C 30.765625 16.007813 30.984375 16.175781 31.242188 16.246094 C 31.496094 16.3125 31.769531 16.277344 32 16.144531 C 32.230469 16.011719 32.398438 15.792969 32.464844 15.535156 C 32.535156 15.28125 32.5 15.007813 32.363281 14.777344 C 32.183594 14.460938 31.84375 14.269531 31.476563 14.277344 Z M 48.453125 14.28125 C 48.109375 14.296875 47.800781 14.484375 47.632813 14.78125 C 47.355469 15.257813 47.523438 15.867188 48 16.144531 C 48.476563 16.421875 49.089844 16.257813 49.363281 15.78125 C 49.5 15.550781 49.535156 15.277344 49.464844 15.019531 C 49.398438 14.761719 49.230469 14.542969 49 14.410156 C 48.832031 14.316406 48.644531 14.269531 48.453125 14.28125 Z M 52.035156 16.980469 C 51.765625 16.972656 51.503906 17.078125 51.3125 17.269531 C 50.921875 17.660156 50.921875 18.296875 51.3125 18.6875 C 51.703125 19.074219 52.335938 19.074219 52.726563 18.6875 C 53.117188 18.296875 53.117188 17.660156 52.726563 17.269531 C 52.542969 17.085938 52.296875 16.984375 52.035156 16.980469 Z M 27.996094 16.980469 C 27.722656 16.976563 27.460938 17.082031 27.269531 17.273438 C 26.882813 17.664063 26.882813 18.296875 27.269531 18.6875 C 27.660156 19.078125 28.296875 19.078125 28.6875 18.6875 C 29.074219 18.296875 29.074219 17.664063 28.6875 17.273438 C 28.5 17.089844 28.253906 16.984375 27.996094 16.980469 Z M 54.699219 20.5 C 54.53125 20.503906 54.367188 20.550781 54.21875 20.632813 C 53.992188 20.765625 53.824219 20.984375 53.753906 21.242188 C 53.6875 21.496094 53.722656 21.769531 53.855469 22 C 54.132813 22.476563 54.742188 22.640625 55.21875 22.363281 C 55.699219 22.089844 55.863281 21.476563 55.585938 21 C 55.402344 20.683594 55.0625 20.492188 54.699219 20.5 Z M 25.230469 20.5 C 24.890625 20.519531 24.582031 20.707031 24.410156 21 C 24.136719 21.476563 24.300781 22.089844 24.777344 22.363281 C 25.007813 22.5 25.28125 22.535156 25.535156 22.464844 C 25.792969 22.398438 26.011719 22.230469 26.144531 22 C 26.421875 21.523438 26.253906 20.910156 25.777344 20.636719 C 25.613281 20.539063 25.421875 20.492188 25.230469 20.5 Z M 23.570313 24.601563 C 23.121094 24.605469 22.730469 24.90625 22.613281 25.34375 C 22.46875 25.875 22.785156 26.421875 23.320313 26.566406 C 23.855469 26.710938 24.402344 26.394531 24.546875 25.859375 C 24.6875 25.324219 24.371094 24.777344 23.839844 24.636719 C 23.75 24.613281 23.660156 24.601563 23.570313 24.601563 Z M 56.457031 24.601563 C 56.359375 24.597656 56.257813 24.609375 56.160156 24.636719 C 55.628906 24.777344 55.3125 25.324219 55.453125 25.859375 C 55.597656 26.394531 56.144531 26.710938 56.679688 26.566406 C 57.214844 26.421875 57.53125 25.875 57.386719 25.34375 C 57.273438 24.917969 56.898438 24.617188 56.457031 24.601563 Z M 23 29 C 22.449219 29 22 29.449219 22 30 C 22 30.550781 22.449219 31 23 31 C 23.550781 31 24 30.550781 24 30 C 24 29.449219 23.550781 29 23 29 Z M 37 29 C 38.117188 29 39 29.882813 39 31 L 41 31 C 41 29.882813 41.882813 29 43 29 C 44.117188 29 45 29.882813 45 31 C 45 32.117188 44.117188 33 43 33 L 42 33 L 42 55 L 38 55 L 38 33 L 37 33 C 35.882813 33 35 32.117188 35 31 C 35 29.882813 35.882813 29 37 29 Z M 57 29 C 56.449219 29 56 29.449219 56 30 C 56 30.550781 56.449219 31 57 31 C 57.550781 31 58 30.550781 58 30 C 58 29.449219 57.550781 29 57 29 Z M 23.617188 33.402344 C 23.515625 33.398438 23.417969 33.410156 23.320313 33.4375 C 22.785156 33.578125 22.46875 34.125 22.613281 34.660156 C 22.757813 35.195313 23.304688 35.511719 23.839844 35.367188 C 24.371094 35.222656 24.6875 34.675781 24.546875 34.140625 C 24.433594 33.71875 24.054688 33.417969 23.617188 33.402344 Z M 56.410156 33.402344 C 55.964844 33.40625 55.570313 33.707031 55.453125 34.140625 C 55.3125 34.675781 55.628906 35.222656 56.160156 35.367188 C 56.695313 35.511719 57.242188 35.195313 57.386719 34.660156 C 57.53125 34.125 57.214844 33.578125 56.679688 33.4375 C 56.59375 33.414063 56.503906 33.402344 56.410156 33.402344 Z M 25.253906 37.5 C 25.085938 37.503906 24.921875 37.546875 24.777344 37.632813 C 24.300781 37.910156 24.136719 38.519531 24.410156 39 C 24.6875 39.476563 25.300781 39.640625 25.777344 39.363281 C 26.007813 39.234375 26.175781 39.015625 26.246094 38.757813 C 26.3125 38.5 26.277344 38.226563 26.144531 38 C 25.960938 37.679688 25.621094 37.488281 25.253906 37.5 Z M 54.671875 37.503906 C 54.335938 37.519531 54.027344 37.707031 53.855469 38 C 53.578125 38.480469 53.742188 39.089844 54.21875 39.367188 C 54.699219 39.644531 55.308594 39.480469 55.585938 39 C 55.863281 38.523438 55.699219 37.914063 55.21875 37.636719 C 55.054688 37.539063 54.863281 37.496094 54.671875 37.503906 Z M 27.996094 41.019531 C 27.722656 41.015625 27.460938 41.121094 27.269531 41.3125 C 26.882813 41.703125 26.882813 42.339844 27.269531 42.730469 C 27.660156 43.117188 28.296875 43.117188 28.6875 42.730469 C 29.074219 42.339844 29.074219 41.703125 28.6875 41.3125 C 28.5 41.128906 28.253906 41.027344 27.996094 41.019531 Z M 52.035156 41.019531 C 51.765625 41.015625 51.503906 41.121094 51.3125 41.3125 C 50.921875 41.703125 50.921875 42.339844 51.3125 42.730469 C 51.703125 43.117188 52.335938 43.117188 52.726563 42.730469 C 52.914063 42.539063 53.019531 42.285156 53.019531 42.019531 C 53.019531 41.753906 52.914063 41.5 52.726563 41.3125 C 52.542969 41.128906 52.292969 41.023438 52.035156 41.019531 Z M 31 57 L 49 57 L 49 59 L 37 59 L 37 61 L 49 61 L 49 63 L 37 63 L 37 65 L 48.816406 65 C 48.410156 66.167969 47.316406 67 46 67 L 34 67 C 32.683594 67 31.589844 66.167969 31.183594 65 L 35 65 L 35 63 L 31 63 L 31 61 L 35 61 L 35 59 L 31 59 Z M 37.183594 69 L 42.816406 69 C 42.410156 70.167969 41.316406 71 40 71 C 38.683594 71 37.589844 70.167969 37.183594 69 Z"></path>
            </svg>
    </button>
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script>
        AOS.init({
            offset: 100, // offset (in px) from the original trigger point
            delay: 0, // delay on elements' animations, in ms
            duration: 800, // duration of the animation, in ms
            easing: 'ease-in-out', // default easing for AOS animations
        });
    </script>

    <script>
        document.getElementById('theme-toggle').addEventListener('click', function() {
            document.body.classList.toggle('light-theme');
            const themeIcon = document.getElementById('theme-icon');
            if (document.body.classList.contains('light-theme')) {
                themeIcon.setAttribute('d', 'M5.64 4.22a9 9 0 0112.72 12.72A9 9 0 015.64 4.22z');  // Moon icon for light theme
            } else {
                themeIcon.setAttribute('d', 'M12 3v1m0 16v1m8.66-8.66l-.707-.707m-15.56 0l-.707.707m13.37-4.95h-1m-16 0H3m12.34 4.95l.707.707m-13.37 0l.707-.707M21 12a9 9 0 11-18 0 9 9 0 0118 0z');  // Sun icon for dark theme
            }
        });
    </script>
    <script>
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();

                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
    <script>
        document.getElementById('mobile-menu-toggle').addEventListener('click', function() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        // Show flash messages if any
        document.addEventListener('DOMContentLoaded', function () {
            var flashAlert = document.querySelector('.flash-alert');
            if (flashAlert) {
                flashAlert.style.display = 'block';
            }
        });

        // Example to show the badge if there are new messages
        document.addEventListener('DOMContentLoaded', function () {
            // This condition should be based on real data (e.g., AJAX request, server-side logic)
            var hasNewMessages = true; // Example condition
            if (hasNewMessages) {
                var badgeElements = document.querySelectorAll('.badge');
                badgeElements.forEach(function (badge) {
                    badge.style.display = 'block';
                });
            }
        });
    </script>

    <footer class="bg-gray-800 text-white py-6">
        <div class="container mx-auto text-center">
            <p>&copy; 2024 StudentExchange. All rights reserved.</p>
        </div>
    </footer>
</body>
</html>
